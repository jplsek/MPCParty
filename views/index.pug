doctype html
html
    head
        title #{pack.name}
        meta(http-equiv='Content-Type', content='text/html; charset=utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1')
        link(rel='icon', href='/img/favicon.png', type='image/x-icon')
        link(rel='shortcut icon', href='/img/favicon.png', type='image/x-icon')
        link(rel='stylesheet', href='/bootstrap/css/bootstrap.min.css')
        link(rel='stylesheet', href='/font-awesome/font-awesome.min.css')
        link(rel='stylesheet', href='/toastr/toastr.css')
        link(rel='stylesheet', href='/jquery-contextmenu/jquery.contextMenu.min.css')
        link(rel='stylesheet', href='/dragula/dragula.min.css')
        link(rel='stylesheet', href='/css/jquery-ui.min.css')
        link(rel='stylesheet', href='/css/overwrite.css')
        link#theme(rel='stylesheet')
        script(src='/jquery/jquery.min.js')
        script(src='/js/jquery-ui.min.js')
        script(src='/popper/popper.min.js')
        script(src='/bootstrap/js/bootstrap.min.js')
        script(src='/js/jQuery_sortColumn.js')
        script(src='/js/jquery-multiselect.js')
        script(src='/toastr/toastr.min.js')
        script(src='/dragula/dragula.min.js')
        script(src='/jquery-contextmenu/jquery.contextMenu.min.js')
        script(src='/socket.io/socket.io.js')
        script(src='/mpcparty.js')
        if (config.testing)
            link(rel='stylesheet', href='https://code.jquery.com/qunit/qunit-1.23.1.css')
            script(src='https://code.jquery.com/qunit/qunit-1.23.1.js')
            script(src='/testing.js')

    body
        #info-modal.modal.fade(tabindex='-1')
            .modal-dialog.modal-lg
                .modal-content
                    .modal-header
                        h4.modal-title #{pack.name} - v#{pack.version}
                        button.close(data-dismiss='modal')
                            <span>&times;</span>
                    .modal-body
                        p
                            = pack.description
                        hr
                        h4 Database Statistics
                        p#stats
                        hr
                        h4 Libraries used in #{pack.name}
                        p
                            a(href='https://www.npmjs.com/package/mpc-js', target='_blank', rel="noopener") mpc-js
                            |  - MPD controller
                        p
                            a(href='https://jquery.com/', target='_blank', rel="noopener") jQuery
                            |  and&nbsp;
                            a(href='https://jqueryui.com/', target='_blank', rel="noopener") jQuery UI Interaction Modules
                            |  - Javascript framework
                        p
                            a(href='http://getbootstrap.com/', target='_blank', rel="noopener") Bootstrap
                            |  - Interface framework
                        p
                            a(href='https://github.com/bighoho123/jQuery-sortColumn', target='_blank') jQuery-sortColumn
                            |  (modified) - Table column sorting
                        p
                            a(href='https://github.com/CodeSeven/toastr', target='_blank', rel="noopener") toastr
                            |  - Notification system
                        p
                            a(href='https://github.com/bevacqua/dragula', target='_blank', rel="noopener") Dragula
                            |  - Drag and drop framework
                        p
                            a(href='https://github.com/swisnl/jQuery-contextMenu', target='_blank', rel="noopener") jquery-contextmenu
                            |  - Context menus on right click
                        p
                            a(href='https://github.com/gkShine/jquery-multiselect', target='_blank', rel="noopener") jquery-multiselect
                            |  (modified) - Allows multiselection in tables
                        p
                            a(href='https://www.npmjs.com/pack/youtube-dl', target='_blank', rel="noopener") youtube-dl
                            |  - Download videos from a wide variety of websites (This is a 'frontend' to&nbsp;
                            a(href='https://rg3.github.io/youtube-dl/', rel="noopener") youtube-dl
                            | )
                        hr
                        h4 Themes
                        p: a(href='http://getbootstrap.com/', target='_blank', rel="noopener") Default Theme
                        hr
                        h4 License of #{pack.name}
                        p #{pack.license}
                    .modal-footer.space-between
                        button.stop-server.btn.btn-danger(title='Stops the server. Depending on the server admin configuration, the server will restart ASAP.')
                            i.fa.fa-power-off
                        p.main-link: a(href='https://github.com/jplsek/MPCParty', target='_blank', rel="noopener") https://github.com/jplsek/MPCParty
                        button.btn.btn-light(data-dismiss='modal') Close

        #settings-modal.modal.fade(tabindex='-1')
            .modal-dialog
                .modal-content
                    .modal-header
                        h4.modal-title Settings
                        button.close(type='button', data-dismiss='modal')
                            <span>&times;</span>
                    .modal-body
                        form.form-group(autocomplete='off')
                            h3 Client Settings
                            .form-group
                                label Theme
                                select#themes.form-control
                                    option(value='default') Default
                                    option(value='default-thin') Default (Thin)
                                    option(value='materialish') Materialish
                                    option(value='materialish-thin') Materialish (Thin)
                            .form-group
                                .form-check
                                    label.form-check-label(title='Note: This client will be slow with playlists larger than 2000 songs if pagination is disabled.')
                                        input#use-pages-playlist.form-check-input(type='checkbox')
                                        | Use playlist pagination
                                label Maximum playlist table rows per page
                                input#items-max-playlist.form-control(type='number', min='5', max='1000')
                            .form-group
                                .form-check
                                    label.form-check-label(title='Note: This client will be slow with libraries larger than 2000 songs if pagination is disabled.')
                                        input#use-pages-browser.form-check-input(type='checkbox')
                                        | Use browser pagination
                                label Maximum browser table rows per page
                                input#items-max-browser.form-control(type='number', min='5', max='1000')
                            .form-group
                                label Maximum notification history table rows
                                input#history-max.form-control(type='number', min='0', max='1000')
                            .form-group
                                .form-check
                                    label.form-check-label(title='Disabling pulse animations may improve performace')
                                        input#use-pulse.form-check-input(type='checkbox')
                                        | Use pulse animation
                                .form-check
                                    label.form-check-label(title='Show or hide "unknown" text in the browser')
                                        input#use-unknown.form-check-input(type='checkbox')
                                        | Use 'unknown' text in the browser (if false, it will show nothing)
                                .form-check
                                    label.form-check-label(title='When enabled, whenever you skip a song, it will be removed from the playlist')
                                        input#use-skip-to-remove.form-check-input(type='checkbox')
                                        | Use skip to remove feature (only works when voting is disabled)
                                .form-check
                                    label.form-check-label(title='Stops showing the warning icon when consume mode is enabled')
                                        input#use-consume-warning.form-check-input(type='checkbox')
                                        | Show MPD's consume warning
                            h3 Server Settings
                            .form-group
                                label Track crossfade (0 - 10 seconds)
                                input#crossfade(type='range', min='0', max='10')
                            .form-group
                                .form-check
                                    label.form-check-label(title='Removes songs when skipping and when the song finishes')
                                        input#consume.form-check-input(type='checkbox')
                                        | Use consume mode
                    .modal-footer
                        button.btn.btn-light(type='button', data-dismiss='modal') Close

        mixin playlists
            table.playlists.table.table-hover
                thead: tr
                    th.col-playlists-title Title
                    th.col-playlists-songs Songs
                    th
                tbody.append


        #playlist-open-modal.modal.fade(tabindex='-1')
            .modal-dialog
                .modal-content
                    .modal-header
                        h4.modal-title Open playlist
                        button.close(type='button', data-dismiss='modal')
                            <span>&times;</span>
                    .modal-body
                        +playlists
                    .modal-footer
                        button.btn.btn-light(type='button', data-dismiss='modal') Cancel
                        button#playlist-open-confirm.btn.btn-primary(type='button', data-dismiss='modal') Open

        #playlist-save-modal.modal.fade(tabindex='-1')
            .modal-dialog
                .modal-content
                    .modal-header
                        h4.modal-title Save playlist
                        button.close(type='button', data-dismiss='modal')
                            <span>&times;</span>
                    .modal-body
                        .input-group
                            input#playlist-save-input.form-control(type='text', placeholder='Enter new playlist name')
                            span.input-group-addon
                                i#playlist-save-clear.fa.fa-remove
                        br
                        +playlists
                    .modal-footer
                        button.btn.btn-light(type='button', data-dismiss='modal') Cancel
                        button#playlist-save-confirm.btn.btn-primary(type='button', data-dismiss='modal') Save

        #song-info-modal.modal.fade(tabindex='-1')
            .modal-dialog
                .modal-content
                    .modal-header
                        h4.modal-title
                        button.close(type='button', data-dismiss='modal')
                            <span>&times;</span>
                    .modal-body
                        table#song-info.table: tbody
                    .modal-footer
                        button.btn.btn-light(type='button', data-dismiss='modal') Close

        if (config.downloader)
            #downloader-location-modal.modal.fade(tabindex='-1')
                .modal-dialog
                    .modal-content
                        .modal-header
                            h4.modal-title Select Location
                            button.close(type='button', data-dismiss='modal')
                                <span>&times;</span>
                        .modal-body
                            #downloader-location-crumb.flex-full
                                ol.breadcrumb
                                    li.breadcrumb-item
                                        i#downloader-home.fa.fa-home(title='Go to the root of the music database.')
                            #downloader-wrap
                                table#downloader-folder-list.table.table-hover
                                    tbody.append
                        .modal-footer
                            button.btn.btn-light(type='button', data-dismiss='modal') Close
                            button#downloader-location-confirm.btn.btn-primary(type='button', data-dismiss='modal') Select

        #page-wrapper
            header.navbar.bg-light
                #media-buttons
                    .btn-group
                        button#previous.btn.btn-outline-dark(title='Play previous song in playlist')
                            i.fa.fa-step-backward
                        button#play.btn.btn-outline-dark(title='Play song in playlist')
                            i.fa.fa-play
                        button#pause.btn.btn-outline-dark(title='Pause song in playlist')
                            i.fa.fa-pause
                        button#stop.btn.btn-outline-dark(title='Stop song in playlist')
                            i.fa.fa-stop
                        button#next.btn.btn-outline-dark(title='Play next song in playlist')
                            i.fa.fa-step-forward
                    .space-between
                        button#go-current.btn.btn-outline-dark(title='Go to the current song in the playlist')
                            i.fa.fa-crosshairs
                        .btn-group
                            button#repeat.btn.btn-outline-dark(title='Repeat playlist')
                                i.fa.fa-repeat
                            button#random.btn.btn-outline-dark(title='Select random songs in playlist')
                                i.fa.fa-random
                // set background for mobile
                #header-middle.bg-light
                    img#album-art
                    #time-bar.flex-full.text-center
                        table#title.fixed-table
                            tr
                                td
                                    span#title-pos
                                    span#title-text
                        #music-time-container.progress
                            #music-time.progress-bar
                        span#time-current
                        span#time-total
                #header-right
                    #header-right-top.space-between
                        if (config.downloader)
                            span.dropdown
                                button#downloader-btn.btn.btn-outline-dark.dropdown-toggle(title='Downloader' data-toggle='dropdown')
                                    i.fa.fa-download
                                div#downloader.dropdown-menu.dropdown-menu-right.stop-click-event
                                    div.dropdown-header Audio Downloader
                                    div.dropdown-item.no-hover
                                        form(autocomplete='off')
                                            label(for='downloader-url') URL
                                            .input-group
                                                input#downloader-url.form-control(type='text', title='Enter a URL, such as from youtube, and this will download the audio on to the server.', placeholder='Enter a url (Ex: a video from youtube)')
                                                span.input-group-addon
                                                    i#downloader-download.fa.fa-download
                                            label(for='downloader-location') Location
                                            .input-group
                                                input#downloader-location.form-control(type='text', title='Location to download the file')
                                                span.input-group-addon
                                                    i#downloader-browse.fa.fa-folder-open(title='Browse to location', data-toggle='modal', data-target='#downloader-location-modal')
                                        #downloader-title
                                        .space-between
                                            #downloader-status
                        span.dropdown
                            button.btn.btn-outline-dark.dropdown-toggle(title='History' data-toggle='dropdown')
                                i.fa.fa-history
                            div.dropdown-menu.dropdown-menu-right.stop-click-event
                                div.dropdown-header Notification History
                                div.dropdown-item.no-hover
                                    table.table: tbody#history
                        if (config.showUsers)
                            span.dropdown
                                button.btn.btn-outline-dark.dropdown-toggle(title='Users using mpcparty' data-toggle='dropdown')
                                    i.fa.fa-user
                                ul#user-list.dropdown-menu.dropdown-menu-right.stop-click-event
                                    li.dropdown-header Users Connected
                        .btn-group
                            button.btn.btn-outline-dark(title='Settings of mpcparty' data-toggle='modal', data-target='#settings-modal')
                                i.fa.fa-wrench
                            button.btn.btn-outline-dark(title='Information about mpcparty' data-toggle='modal', data-target='#info-modal')
                                i.fa.fa-info-circle
                    form(autocomplete='off')
                        .input-group
                            input#search-browser.form-control(type='text', placeholder='Search songs...')
                            span.input-group-addon
                                i#search-clear.fa.fa-remove

            mixin pages(id)
                .pages.navbar.bg-light(id=id+'-pages')
                    button.btn.btn-light.first(title='Go to first page')
                        i.fa.fa-angle-double-left
                    button.btn.btn-light.previous(title='Go to previous page')
                        i.fa.fa-angle-left
                    span Page
                    form(autocomplete='off')
                        input.form-control(type='number', min='1', value='1')
                    span of
                    span.total-pages 1
                    button.btn.btn-light.next(title='Go to next page')
                        i.fa.fa-angle-right
                    button.btn.btn-light.last(title='Go to last page')
                        i.fa.fa-angle-double-right

            mixin songListHeader(id)
                table.table-header.table(id=id+'-header')
                    thead: tr
                        th(id=id+'-col-number') #
                        th(id=id+'-col-title') Title
                        th(id=id+'-col-artist') Artist
                        th(id=id+'-col-album') Album
                        th(id=id+'-col-time') Time
                        th

            mixin songList(id)
                table.song-list.table.table-hover(id=id)
                    tbody.append.connected(id=id+'-tbody')

            mixin libraryAA(id, title, search)
                div(id='library-'+id)
                    div(id='library-'+id+'-header')
                        form(autocomplete='off')
                            .input-group
                                input.form-control(id='search-'+id, type='text', placeholder='Search '+search+'...')
                                span.input-group-addon
                                    i.fa.fa-remove(id='search-'+id+'-clear')
                    table.table-header-fixed.table(id='library-'+id+'-list-header')
                        thead: tr
                            th(id='library-col-'+id) #{title}
                            th
                    div(id='library-'+id+'-wrap')
                        table(id='library-'+id+'-list', class='table table-hover library-list-context')
                            tbody.append.connected(id='library-'+id+'-list-tbody')

            main.row
                #browser-selection.col-2.col-sm-1.col-md-1
                    button#update.btn.btn-light(title='Update the music database (after uploading new music to the folder)')
                        i.fa.fa-refresh
                    button#open-file-browser.btn.btn-light(title='Show the file browser')
                        i.fa.fa-folder-open
                    button#open-library.btn.btn-light(title='Show the library')
                        i.fa.fa-align-justify
                    i#warning-consume.text-warning.fa.fa-warning-sign.none(title='MPD\'s consume mode is enabled!')
                    #volume-progress.progress
                        #volume.progress-bar
                    #volume-speaker-container
                        i#volume-speaker.fa.fa-volume-up

                #library.col-9.col-sm-10.col-md-7
                    #library-top
                        +libraryAA('artists', 'Artist', 'artists')
                        +libraryAA('albums', 'Album', 'albums from artist')
                    #library-songs
                        #library-songs-header
                            form(autocomplete='off')
                                .input-group
                                    input#search-songs.form-control(type='text', placeholder='Search songs from album...')
                                    span.input-group-addon
                                        i#search-songs-clear.fa.fa-remove
                        +songListHeader('library-songs-list')
                        #library-songs-wrap
                            +songList('library-songs-list')

                #browser.col-9.col-sm-10.col-md-7
                    noscript: h1 You have Javascript disabled. This does not work without Javascript.
                    // having the block wrapper fixes an issue with webkit not getting the childs height
                    #browser-header-wrap
                        #browser-header
                            #location.flex-full
                                ol.breadcrumb
                                    li.breadcrumb-item
                                        i#home.fa.fa-home(title='Go to the root of the music database.')
                            #browser-bottons
                                .btn-group
                                    button#add-all.btn.btn-light(title='Add all songs from the current page')
                                        | Add All
                    +songListHeader('file-browser-song-list')
                    #slwrap
                        +songList('file-browser-song-list')
                    +pages('browser')

                #playlist.col-11.col-sm-11.col-md-4
                    // having the block wrapper fixes an issue with webkit not getting the childs height
                    #playlist-header-wrap
                        #playlist-header
                            div.flex-full
                                table.fixed-table
                                    tr
                                        td#playlist-title
                                            strong
                            #playlist-buttons.btn-group
                                button#new-playlist.btn.btn-light(title='Create a new playlist')
                                    i.fa.fa-plus
                                button#clear-playlist.btn.btn-light(title='Clear the playlist')
                                    i.fa.fa-remove
                                button#open-playlist.btn.btn-light(title='Open a playlist' data-toggle='modal', data-target='#playlist-open-modal')
                                    i.fa.fa-folder-open
                                button#save-playlist.btn.btn-light(title='Save the playlist' data-toggle='modal', data-target='#playlist-save-modal')
                                    i.fa.fa-floppy-o
                                button#scramble.btn.btn-light(title='Scramble the playlist')
                                    i.fa.fa-random
                                button#remove-duplicates.btn.btn-light(title='Remove duplicate songs from the playlist based on the title')
                                    i.fa.fa-recycle
                                button#playlist-search-toggle.btn.btn-light(type='button')
                                    i.fa.fa-search
                    #playlist-search.none
                        form(autocomplete='off')
                            .input-group
                                input#search-playlist.form-control(type='text', placeholder='Search playlist...')
                                span.input-group-addon
                                      i#search-playlist-clear.fa.fa-remove
                    #pslwrap
                        table#playlist-song-list.table.table-hover
                            tbody#playlist-song-list-tbody.append.connected
                    +pages('playlist')

        footer
            #pe.card.card-default.none
                #pe-header.card-heading
                    .card-default-shown
                        .btn-group
                            button#pe-clear.btn.btn-light(title='Clear the playlist')
                                i.fa.fa-remove
                            button#pe-open.btn.btn-light(title='Open a playlist' data-toggle='modal', data-target='#playlist-open-modal')
                                i.fa.fa-folder-open
                            button#pe-save.btn.btn-light(title='Save the playlist', data-toggle='modal', data-target='#playlist-save-modal')
                                i.fa.fa-floppy-o
                            button#pe-scramble.btn.btn-light(title='Scramble the playlist')
                                i.fa.fa-random
                            button#pe-remove-duplicates.btn.btn-light(title='Remove duplicate songs from the playlist based on the title')
                                i.fa.fa-recycle
                            button#pe-search-toggle.btn.btn-light(type='button')
                                i.fa.fa-search
                        span.card-title Playlist Editor
                        .btn-group.pull-right
                            button#pe-minimize.btn.btn-light
                                i.fa.fa-minus
                            button#pe-close.btn.btn-light
                                i.fa.fa-remove
                    #pe-search.none
                        form(autocomplete='off')
                            .input-group
                                input#search-pe.form-control(type='text', placeholder='Search playlist editor...')
                                span.input-group-addon
                                    i#search-pe-clear.fa.fa-remove
                #pe-main.card-body
                    #pewrap
                        table#pe-song-list.table.table-hover
                            tbody#pe-song-list-tbody.append.connected
            #pe-tab.bg-dark.text-light.none Resume playlist editor

        if (config.testing)
            #testing.card.card-default
                #testing-header.card-heading
                    span.card-title Unit Tests
                    button#start-testing.pull-right.btn.btn-light(type='button') Start tests
                #testing-main.card-body
                    #qunit
